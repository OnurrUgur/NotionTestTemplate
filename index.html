<!DOCTYPE html>
<html>
<head>
  <title>Portfolio Tracker</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>
</head>
<body>
  <h1>Portfolio Tracker</h1>

  <form id="portfolioForm">
    <label for="stockName">Stock Name:</label>
    <input type="text" id="stockName" required><br><br>

    <label for="buyingPrice">Buying Price:</label>
    <input type="number" step="0.01" id="buyingPrice" required><br><br>

    <label for="buyingCount">Buying Count:</label>
    <input type="number" step="0.01" id="buyingCount" required><br><br>

    <label for="totalAmount">How Much Did I Buy:</label>
    <input type="number" step="0.01" id="totalAmount" required><br><br>

    <button type="submit">Add to Portfolio</button>
  </form>

  <canvas id="portfolioChart" width="400" height="400"></canvas>

  <script>
    // Portfolio data
    let portfolio = [];

    // Get form and chart elements
    const form = document.getElementById('portfolioForm');
    const chartCanvas = document.getElementById('portfolioChart').getContext('2d');

    // Add form submission event listener
    form.addEventListener('submit', function(event) {
      event.preventDefault();

      // Get input values
      const stockName = document.getElementById('stockName').value;
      const buyingPrice = parseFloat(document.getElementById('buyingPrice').value);
      const buyingCount = parseFloat(document.getElementById('buyingCount').value);
      const totalAmount = parseFloat(document.getElementById('totalAmount').value);

      // Create object for portfolio entry
      const portfolioEntry = {
        stockName: stockName,
        buyingPrice: buyingPrice,
        buyingCount: buyingCount,
        totalAmount: totalAmount
      };

      // Add entry to portfolio array
      portfolio.push(portfolioEntry);

      // Clear form inputs
      form.reset();

      // Update the chart
      updateChart();
    });

    // Update the chart with current portfolio data
    function updateChart() {
      // Calculate total buying count
      let totalBuyingCount = 0;
      for (let i = 0; i < portfolio.length; i++) {
        totalBuyingCount += portfolio[i].buyingCount;
      }

      // Prepare labels and data for the chart
      const labels = portfolio.map(entry => entry.stockName);
      const data = portfolio.map(entry => entry.buyingCount);

      // Create and update the chart
      new Chart(chartCanvas, {
        type: 'bar',
        data: {
          labels: labels,
          datasets: [{
            label: 'Buying Count',
            data: data,
            backgroundColor: 'rgba(75, 192, 192, 0.6)'
          }]
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: 'Buying Count'
              }
            },
            x: {
              title: {
                display: true,
                text: 'Stock Name'
              }
            }
          }
        }
      });
    }
  </script>
</body>
</html>
